#!/bin/bash

echo "=========================================="
echo "检查系统内存和进程状态"
echo "=========================================="
echo ""

echo "📊 1. 系统内存使用情况"
echo "----------------------------------------"
free -h

echo ""
echo "📊 2. 当前运行的 Node.js 进程"
echo "----------------------------------------"
ps aux | grep node | grep -v grep | head -n 10

echo ""
echo "📊 3. PM2 进程状态"
echo "----------------------------------------"
pm2 list 2>/dev/null || echo "PM2 未运行或无法访问"

echo ""
echo "📊 4. 系统负载"
echo "----------------------------------------"
uptime

echo ""
echo "📊 5. 检查是否有 OOM Killer 日志"
echo "----------------------------------------"
dmesg | grep -i "killed process" | tail -n 5 || echo "未发现 OOM Killer 记录"

echo ""
echo "=========================================="
echo "检查完成"
echo "=========================================="

