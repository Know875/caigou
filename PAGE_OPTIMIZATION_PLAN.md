# 页面性能优化计划

## 📊 发现的性能问题

### 1. 报价管理页面 (`quotes/page.tsx`) ⚠️ 高优先级

**问题**：
- 页面加载时同时调用 3 个 API：
  - `fetchQuotes()` - 获取报价列表
  - `fetchAvailableRfqs()` - 获取可用询价单
  - `fetchAwards()` - 获取中标记录
- 所有数据加载完成后才显示页面（`setLoading(false)`）

**优化方案**：
- 先显示页面框架，再延迟加载数据
- 优先加载关键数据（报价列表），其他数据延迟加载

**预期效果**：
- 首次渲染时间减少 **50-70%**
- 用户体验显著提升

---

### 2. 询价单列表页 (`rfqs/page.tsx`) ⚠️ 高优先级

**问题**：
- 页面加载时同时调用 3 个 API：
  - `fetchRfqs()` - 获取询价单列表
  - `fetchOrders()` - 获取订单列表
  - `fetchStores()` - 获取门店列表
- 所有数据加载完成后才显示页面

**优化方案**：
- 先显示页面框架，再延迟加载数据
- 优先加载询价单列表，订单和门店列表延迟加载

**预期效果**：
- 首次渲染时间减少 **50-70%**
- 用户体验显著提升

---

### 3. 发货管理页面 (`shipments/page.tsx`) ⚠️ 中优先级

**需要检查**：是否也有类似的问题

---

### 4. 订单管理页面 (`orders/page.tsx`) ⚠️ 中优先级

**需要检查**：是否也有类似的问题

---

## 🛠️ 优化策略

### 通用优化模式

1. **延迟加载数据**
   ```typescript
   useEffect(() => {
     // 先显示页面
     setLoading(false);
     // 延迟加载数据
     setTimeout(() => {
       fetchData();
     }, 100);
   }, []);
   ```

2. **渐进式数据加载**
   ```typescript
   // 优先加载关键数据
   await fetchCriticalData();
   // 延迟加载其他数据
   setTimeout(() => {
     fetchOtherData();
   }, 300);
   ```

3. **分离关键数据和非关键数据**
   - 关键数据：用户主要查看的内容
   - 非关键数据：辅助信息、筛选选项等

---

## 📋 实施优先级

### 高优先级（立即实施）
1. ✅ 报价管理页面
2. ✅ 询价单列表页

### 中优先级（近期实施）
3. ⚠️ 发货管理页面
4. ⚠️ 订单管理页面

---

## 🎯 预期总体效果

实施所有优化后：
- **页面首次渲染时间减少 50-70%**
- **用户体验显著改善**
- **页面响应速度提升 2-3 倍**

