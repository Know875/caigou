#!/bin/bash

echo "=========================================="
echo "ç½‘ç»œ I/O è¯Šæ–­"
echo "=========================================="
echo ""

echo "ğŸ“Š 1. ç½‘ç»œè¿æ¥ç»Ÿè®¡"
echo "----------------------------------------"
ss -s

echo ""
echo "ğŸ“Š 2. ç½‘ç»œè¿æ¥è¯¦æƒ…ï¼ˆæŒ‰çŠ¶æ€åˆ†ç»„ï¼‰"
echo "----------------------------------------"
ss -ant | awk '{print $1}' | sort | uniq -c | sort -rn

echo ""
echo "ğŸ“Š 3. æŸ¥çœ‹æœ€å¤šçš„ç½‘ç»œè¿æ¥ï¼ˆæŒ‰ IPï¼‰"
echo "----------------------------------------"
ss -ant | grep ESTAB | awk '{print $5}' | cut -d: -f1 | sort | uniq -c | sort -rn | head -n 10

echo ""
echo "ğŸ“Š 4. æŸ¥çœ‹ç½‘ç»œæµé‡ç»Ÿè®¡"
echo "----------------------------------------"
cat /proc/net/sockstat

echo ""
echo "ğŸ“Š 5. æŸ¥çœ‹ç½‘ç»œä¸­æ–­ç»Ÿè®¡"
echo "----------------------------------------"
cat /proc/interrupts | grep -i eth | head -n 5

echo ""
echo "ğŸ“Š 6. æ£€æŸ¥æ˜¯å¦æœ‰å¼‚å¸¸è¿æ¥ï¼ˆå¤§é‡è¿æ¥æ¥è‡ªåŒä¸€ IPï¼‰"
echo "----------------------------------------"
ss -ant | grep ESTAB | awk '{print $5}' | cut -d: -f1 | sort | uniq -c | sort -rn | head -n 20

echo ""
echo "ğŸ“Š 7. æŸ¥çœ‹ç³»ç»Ÿè´Ÿè½½è¯¦æƒ…"
echo "----------------------------------------"
vmstat 1 3

echo ""
echo "=========================================="
echo "è¯Šæ–­å®Œæˆ"
echo "=========================================="

